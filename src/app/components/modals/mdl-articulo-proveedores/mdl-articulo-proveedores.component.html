<div class="modal-header sticky-top bg-white shadow-sm">
  <h2>Proveedores del artículo</h2>
  <div class="btn btn-sm btn-icon btn-active-color-primary" (click)="bsModalRef.hide()">
    <span class="svg-icon svg-icon-1">
      <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none">
        <rect opacity="0.5" x="6" y="17.3137" width="16" height="2" rx="1" transform="rotate(-45 6 17.3137)" fill="currentColor"></rect>
        <rect x="7.41422" y="6" width="16" height="2" rx="1" transform="rotate(45 7.41422 6)" fill="currentColor"></rect>
      </svg>
    </span>
  </div>
</div>
<div class="modal-body p-0 overflow-auto">

  <div class="border-bottom sticky-top bg-white z-index-3">
    <div class="p-4">
      <div class="alert alert-success d-flex align-items-center border-0 p-5 mb-0">
        <span class="svg-icon svg-icon-2hx svg-icon-success me-4">
          <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 512 512">
            <path opacity="0.3" d="M512 224v240a48 48 0 0 1-48 48H48a48 48 0 0 1-48-48V224z" fill="currentColor"/>
            <path d="M53.1 32.8L2.5 184.6c-.8 2.4-.8 4.9-1.2 7.4H240V0H98.6a47.87 47.87 0 0 0-45.5 32.8zm456.4 151.8L458.9 32.8A47.87 47.87 0 0 0 413.4 0H272v192h238.7c-.4-2.5-.4-5-1.2-7.4z" fill="currentColor"/>
          </svg>
        </span>
        <div class="d-flex flex-column">
          <h4 class="mb-0 text-success">{{ articulo?.nombre }}</h4>
        </div>
      </div>
    </div>
    <mat-progress-bar *ngIf="loadingProveedores"  mode="indeterminate" ></mat-progress-bar>
  </div>
  <div class="result">
    <div class="table-responsive">
      <table #tabla mat-table [dataSource]="dataSource" matSort class="w-100 nowrap muted">

        <ng-container matColumnDef="id">
          <th mat-header-cell *matHeaderCellDef width="50"> ID </th>
          <td mat-cell *matCellDef="let element"> {{element.id}} </td>
        </ng-container>

        <ng-container matColumnDef="ruc">
          <th mat-header-cell *matHeaderCellDef> R.U.C </th>
          <td mat-cell *matCellDef="let element"> {{element.ruc}} </td>
        </ng-container>

        <ng-container matColumnDef="razonSocial">
          <th mat-header-cell *matHeaderCellDef> R. Social </th>
          <td mat-cell *matCellDef="let element"> {{element.razonSocial}} </td>
        </ng-container>

        <ng-container matColumnDef="contactoNombre">
          <th mat-header-cell *matHeaderCellDef> C. Nombre </th>
          <td mat-cell *matCellDef="let element"> {{element.contactoNombre}} </td>
        </ng-container>

        <ng-container matColumnDef="contactoApellido">
          <th mat-header-cell *matHeaderCellDef> C. Apellido </th>
          <td mat-cell *matCellDef="let element"> {{element.contactoApellido}} </td>
        </ng-container>

        <ng-container matColumnDef="contactoTelefono">
          <th mat-header-cell *matHeaderCellDef> C. Teléfono </th>
          <td mat-cell *matCellDef="let element"> {{element.contactoTelefono}} </td>
        </ng-container>

        <ng-container matColumnDef="contactoCorreo">
          <th mat-header-cell *matHeaderCellDef> C. Correo </th>
          <td mat-cell *matCellDef="let element"> {{element.contactoCorreo}} </td>
        </ng-container>

        <ng-container matColumnDef="ciudad">
          <th mat-header-cell *matHeaderCellDef> Ciudad </th>
          <td mat-cell *matCellDef="let element"> {{util.capitalizeFirst(element.ciudad)}} </td>
        </ng-container>

        <ng-container matColumnDef="distrito">
          <th mat-header-cell *matHeaderCellDef> Distrito </th>
          <td mat-cell *matCellDef="let element"> {{util.capitalizeFirst(element.distrito)}} </td>
        </ng-container>

        <ng-container matColumnDef="direccion">
          <th mat-header-cell *matHeaderCellDef> Dirección </th>
          <td mat-cell *matCellDef="let element"> {{element.direccion}} </td>
        </ng-container>

        <ng-container matColumnDef="fechaRegistro">
          <th mat-header-cell mat-sort-header *matHeaderCellDef> F. Registro </th>
          <td mat-cell *matCellDef="let element">
            <span class="d-block small">{{element.fechaRegistro | date: 'dd-MM-yyyy hh:mm:ss aa'}}</span>
            <span class="d-block small">{{ element.usuarioRegistro }}</span>
          </td>
        </ng-container>

        <ng-container matColumnDef="fechaModifico">
          <th mat-header-cell mat-sort-header *matHeaderCellDef> F. Modifico </th>
          <td mat-cell *matCellDef="let element">
            <span class="d-block small">{{element.fechaModifico | date: 'dd-MM-yyyy hh:mm:ss aa'}}</span>
            <span class="d-block small">{{ element.usuarioModifico }}</span>
          </td>
        </ng-container>

        <ng-container matColumnDef="estado">
          <th mat-header-cell mat-sort-header *matHeaderCellDef> Estado </th>
          <td mat-cell *matCellDef="let element">
            <span *ngIf="element.idEstado === 0" class="badge py-3 px-4 fs-8 badge-light-danger f-w-500">{{ element.estado }}</span>
            <span *ngIf="element.idEstado === 1" class="badge py-3 px-4 fs-8 badge-light-primary f-w-500">{{ element.estado }}</span>
          </td>
        </ng-container>

        <ng-container matColumnDef="actions">
          <th mat-header-cell *matHeaderCellDef width="50"> </th>
          <td mat-cell *matCellDef="let element">
            <div class="d-flex justify-content-end flex-shrink-0">
              <a matRipple class="btn btn-icon btn-light-danger btn-sm" (click)="onRemove(element.id)" tooltip="Quitar" placement="start">
                <span class="svg-icon svg-icon-3">
                  <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none">
                    <rect opacity="0.5" x="6" y="17.3137" width="16" height="2" rx="1" transform="rotate(-45 6 17.3137)" fill="currentColor"></rect>
                    <rect  x="7.41422" y="6" width="16" height="2" rx="1" transform="rotate(45 7.41422 6)" fill="currentColor"></rect>
                  </svg>
                </span>
              </a>
            </div>
          </td>
        </ng-container>

        <tr mat-header-row *matHeaderRowDef="displayedColumns"></tr>
        <tr mat-row *matRowDef="let row; let i = index; columns: displayedColumns;"  [@slideFromBottom]="{value: '* <=> *',params : { delay: (i+1) * 50 }}"></tr>

        <!-- Row shown when there is no matching data. -->
        <tr class="mat-row" *matNoDataRow>
          <td class="mat-cell text-muted small" [attr.colspan]="displayedColumns.length">No se encontraron registros</td>
        </tr>
      </table>
    </div>
  </div>
  <div class="text-center">
    <button type="button" matRipple class="mat-ripple btn btn-light-success btn-lg my-5" (click)="onSearchProvider()">
      <span class="svg-icon svg-icon-2x">
        <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none">
          <rect opacity="0.5" x="17.0365" y="15.1223" width="8.15546" height="2" rx="1" transform="rotate(45 17.0365 15.1223)" fill="currentColor"></rect>
          <path d="M11 19C6.55556 19 3 15.4444 3 11C3 6.55556 6.55556 3 11 3C15.4444 3 19 6.55556 19 11C19 15.4444 15.4444 19 11 19ZM11 5C7.53333 5 5 7.53333 5 11C5 14.4667 7.53333 17 11 17C14.4667 17 17 14.4667 17 11C17 7.53333 14.4667 5 11 5Z" fill="currentColor"></path>
        </svg>
      </span> Añadir proveedores
    </button>
  </div>
</div>
<div class="modal-footer position-sticky bottom-0 bg-white shadow-sm">
  <button matRipple type="reset" class="btn btn-light" (click)="bsModalRef.hide()">Cancelar</button>
  <button matRipple [disabled]="loadingSubmit" matRipple type="submit" class="btn btn-primary" [attr.data-kt-indicator]="submitted && loadingSubmit" (click)="onSubmit()">
    <span class="indicator-label">Guardar</span>
    <span class="indicator-progress">Porfavor espere...
          <span class="spinner-border spinner-border-sm align-middle ms-2"></span></span>
  </button>
</div>
